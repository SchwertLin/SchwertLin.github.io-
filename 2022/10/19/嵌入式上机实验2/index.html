<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="author" content="Schwertlilien"/><meta name="keyword"/><meta name="description" content="实验二 定时器对于定时器的实现： 软件实现的for循环不太精确，采用内部系统时钟，可实现精确的定时，其工作模式为：普通模式、比较输出&#x2F;PWM输出模式、捕获输入模式 PWM：输出指定波形 捕获输入：测量输入信号频率和占空比，测量外部时间 示波器：可以以准确的时间看捏 一、实验目的 掌握Proteus和Keil联调的方法。  掌握STM32上利用定时器的技术模式进行延时的方法。  掌握STM">
<meta property="og:type" content="article">
<meta property="og:title" content="嵌入式上机实验2">
<meta property="og:url" content="http://example.com/2022/10/19/%E5%B5%8C%E5%85%A5%E5%BC%8F%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C2/index.html">
<meta property="og:site_name" content="Schwertlilien">
<meta property="og:description" content="实验二 定时器对于定时器的实现： 软件实现的for循环不太精确，采用内部系统时钟，可实现精确的定时，其工作模式为：普通模式、比较输出&#x2F;PWM输出模式、捕获输入模式 PWM：输出指定波形 捕获输入：测量输入信号频率和占空比，测量外部时间 示波器：可以以准确的时间看捏 一、实验目的 掌握Proteus和Keil联调的方法。  掌握STM32上利用定时器的技术模式进行延时的方法。  掌握STM">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s1.ax1x.com/2022/10/15/x0lMxU.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/10/15/x0l1r4.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/10/15/x01Nwj.png">
<meta property="og:image" content="https://s1.ax1x.com/2022/10/15/x01tmQ.png">
<meta property="article:published_time" content="2022-10-19T13:15:49.000Z">
<meta property="article:modified_time" content="2022-10-19T13:16:37.449Z">
<meta property="article:author" content="Schwertlilien">
<meta property="article:tag" content="嵌入式">
<meta property="article:tag" content="实验">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.ax1x.com/2022/10/15/x0lMxU.png"><title>嵌入式上机实验2 - Schwertlilien - -----personal blog-----</title><link rel="shortcut icon" href="/img/site-icon.png">
<link rel="stylesheet" href="/css/style.css" id="dm-light">


<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><header><div class="top-nav" ondblclick="scrollToTop()"><div class="nav-info"><div class="nav-icon"><img id="nav-icon" src="/img/site-icon.png"/></div><div class="nav-title"><a id="nav-title" href="/" title="主页">Schwertlilien</a></div></div><div class="nav-ribbon"><div class="top-menu-expanded"><a class="top-menu-item" href="/archives"><span>归档</span></a><a class="top-menu-item" href="/categories"><span>分类</span></a><a class="top-menu-item" href="/tags"><span>标签</span></a><a class="top-menu-item" href="/about"><span>关于</span></a></div><div class="top-search" onclick="toggleSearchWindow()"><div id="top-search-btn" title="搜索"><i class="icon fa-solid fa-magnifying-glass"></i><span>搜索</span></div></div><div id="top-menu-btn" onclick="openTopMenu()" title="打开菜单"><i class="fa-solid fa-bars fa-lg"></i></div></div></div></header><div id="top-menu-hidden"><div class="menu-hidden-content"><div class="menu-hidden-nav"><a class="menu-hidden-item" href="/archives"><i class="fa-solid fa-box-archive fa-sm"></i><span>归档</span></a><a class="menu-hidden-item" href="/categories"><i class="fa-regular fa-folder-open fa-sm"></i><span>分类</span></a><a class="menu-hidden-item" href="/tags"><i class="fa-solid fa-tags fa-sm"></i><span>标签</span></a><a class="menu-hidden-item" href="/about"><i class="fa-solid fa-paw fa-sm"></i><span>关于</span></a></div></div><div class="menu-hidden-blank" onclick="closeTopMenu()"></div></div>
<div class="blog-info"><div class="blog-pic"><img id="blog-pic" src="/img/site-icon.png"/></div><div class="blog-title"><i class="fa-solid fa-paw fa-2xs fa-rotate-by"></i><span>Schwertlilien</span><i class="fa-solid fa-paw fa-2xs fa-rotate-by"></i></div><div class="blog-desc">As a recoder: notes and ideas.</div></div><div class="main"><div class="main-content"><article class="post"><div class="post-title"><h1><i class="fa-solid fa-paw"></i>嵌入式上机实验2</h1></div><div class="post-info"><div class="post-info-first-line"><div class="post-date"><i class="icon fa-regular fa-calendar-plus" title="发布日期"></i><time class="publish-time">2022-10-19</time><i class="icon fa-regular fa-calendar-check" title="更新日期"></i><time class="update-time">2022-10-19</time></div>

<div class="post-tags"><i class="icon fa-solid fa-tags" title="标签"></i><a class="post-tag" href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</a><i class="icon fa-solid fa-tags" title="标签"></i><a class="post-tag" href="/tags/%E5%AE%9E%E9%AA%8C/">实验</a></div></div><div class="post-info-second-line"><div class="post-copyright"><i class="icon fa-brands fa-creative-commons" title="版权声明"></i><span>版权声明: </span><a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh-hans" title="CC BY-NC-ND 4.0">署名-非商业性使用-禁止演绎 4.0</a></div>
<div class="post-word-count"><i class="icon fa-solid fa-pen-to-square"></i><span>全文约1.8K字</span></div><div class="pageview-post"><i class="icon fa-regular fa-eye"></i><span id="busuanzi_container_page_pv">阅读次数: <span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner"></i></span></span></div></div></div><div class="post-content"><h2 id="实验二-定时器"><a href="#实验二-定时器" class="headerlink" title="实验二 定时器"></a>实验二 定时器</h2><p>对于定时器的实现：</p>
<p>软件实现的for循环不太精确，采用内部系统时钟，可实现精确的定时，其工作模式为：普通模式、比较输出&#x2F;PWM输出模式、捕获输入模式</p>
<p>PWM：输出指定波形</p>
<p>捕获输入：测量输入信号频率和占空比，测量外部时间</p>
<p>示波器：可以以准确的时间看捏</p>
<h4 id="一、实验目的"><a href="#一、实验目的" class="headerlink" title="一、实验目的"></a>一、实验目的</h4><ul>
<li><p>掌握Proteus和Keil联调的方法。</p>
</li>
<li><p>掌握STM32上利用定时器的技术模式进行延时的方法。</p>
</li>
<li><p>掌握STM32上定时器的PWM模式的运用方法。</p>
</li>
</ul>
<h4 id="二、实验环境"><a href="#二、实验环境" class="headerlink" title="二、实验环境"></a>二、实验环境</h4><p> OS：Windows11</p>
<p>软件：Keil uVision5，Proteus</p>
<h4 id="三、实验内容"><a href="#三、实验内容" class="headerlink" title="三、实验内容"></a>三、实验内容</h4><p>根据实验原理图配置对应的GPIO口和定时器，实现下述功能：</p>
<p>①  配置三个LED和串口相关的IO功能；</p>
<p>②  配置TIM1，根据系统8MHz时钟，配置定时周期为1秒，向上计数模式；然后在while循环中使能定时器，查询等待定时器时间到，点亮3个LED灯，再次使能定时器，等待定时时间到，熄灭3个LED灯，循环往复。</p>
<p>③  配置TIM1，根据系统8MHz时钟，配置定时周期为1秒，向上计数模式；配置TIM1的CH1、CH2、CH3为PWM模式，生成占空比为50%的波形；使能定时器和PWM输出；在while循环中空循环即可。</p>
<p>④  上述两种模式可以单独实现，也可通过宏定义控制的形式实现在一个<code>main.c</code>中。</p>
<h4 id="四、实验原理"><a href="#四、实验原理" class="headerlink" title="四、实验原理"></a>四、实验原理</h4><p>①首先配置三个LED灯和串口相关的IO功能，此处使用的是实验一中介绍的片内外设GPIO来配置。使能APB1总线上的引脚PA8,9,10所属端口GPIOA的时钟，设置需要使用的GPIOA端口，将PA8,9,10配置为普通推挽输出。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//now need config the IO-PA8,9,10</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin=GPIO_Pin_10|GPIO_Pin_9|GPIO_Pin_8;</span><br><span class="line">GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz;</span><br><span class="line">GPIO_InitStructure.GPIO_Mode=GPIO_Mode_Out_PP;</span><br><span class="line">GPIO_Init(GPIOA,&amp;GPIO_InitStructure);</span><br></pre></td></tr></table></figure>

<p>再来配置TIM1：根据系统内8MHZ的时钟，配置器定时周期为1s。对于定时周期为1s的设置，需要根据公式：<br>$$<br>T&#x3D;\frac{(TIM_{Prescaler}+1)(TIM_{Period}+1)}{TIMxCLK}<br>$$<br><code>TIMxCLK</code>在软件仿真中取值8MHZ，因此为使T&#x3D;1s，则$(TIM_{Prescaler}+1)(TIM_{Period}+1)$要取值为8M。此处取<code>Prescaler</code>预分频为8k，那么<code>Period</code>持续时间选择1k。</p>
<p>然后，将TIM1设置为向上计数模式。对于计数模式共有两种：中心对齐和边沿对齐。此处选择的是边沿对齐的向上计数。因此就将TIM1的要求配置完毕。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//then finish TIM1&#x27;s requirements</span></span><br><span class="line">TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;</span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_TIM1,ENABLE);</span><br><span class="line">TIM_TimeBaseStructure.TIM_Prescaler=<span class="number">8000</span><span class="number">-1</span>;<span class="comment">//1khz=1ms</span></span><br><span class="line">TIM_TimeBaseStructure.TIM_Period=<span class="number">1000</span><span class="number">-1</span>;<span class="comment">//1ms*1k=1s</span></span><br><span class="line">TIM_TimeBaseStructure.TIM_ClockDivision=<span class="number">0</span>;</span><br><span class="line">TIM_TimeBaseStructure.TIM_RepetitionCounter=<span class="number">0</span>;</span><br><span class="line">TIM_TimeBaseStructure.TIM_CounterMode=TIM_CounterMode_Up;</span><br><span class="line">TIM_TimeBaseInit(TIM1,&amp;TIM_TimeBaseStructure);</span><br></pre></td></tr></table></figure>

<p>②对于完成第二项功能，使用的是普通输出模式。要求将自行在<code>while(1)</code>无限循环中写于有关的测试代码以实现：在<code>while</code>循环中使能定时器，查询等待定时时间到，点亮3个LED灯，再此使能定时器，等待定时时间到，熄灭3个LED灯。</p>
<p>因此先将<code>PA8,9,10</code>引脚设置为低电平，这样三个LED灯的初始状态即为亮；在开启TIM1计时后，会通过循环轮询TIM1标志位的状态。当TIM1计时结束后，清除TIM1的标志位的状态。此时将<code>PA8,9,10</code>引脚设置为高电平，这样三个LED灯就会熄灭；再次进行TIM1计时，以达到循环亮灭的目的。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Infinite loop */</span></span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">	GPIO_ResetBits(GPIOA,GPIO_Pin_8|GPIO_Pin_9|GPIO_Pin_10);<span class="comment">//light on</span></span><br><span class="line">	TIM_Cmd(TIM1,ENABLE);</span><br><span class="line">	<span class="keyword">while</span>(TIM_GetFlagStatus(TIM1,TIM_FLAG_Update)==RESET);</span><br><span class="line">	TIM_ClearFlag(TIM1,TIM_FLAG_Update);</span><br><span class="line">		</span><br><span class="line">	GPIO_SetBits(GPIOA,GPIO_Pin_8|GPIO_Pin_9|GPIO_Pin_10);<span class="comment">//light off</span></span><br><span class="line">	TIM_Cmd(TIM1,ENABLE);</span><br><span class="line">	<span class="keyword">while</span>(TIM_GetFlagStatus(TIM1,TIM_FLAG_Update)==RESET);</span><br><span class="line">	TIM_ClearFlag(TIM1,TIM_FLAG_Update);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>③功能三需要使用PWM模式，要求其占空比为50%。对于使用PWM模式的输出，需要先复用端口，即将上文中的<code>GPIO_InitStructure.GPIO_Mode=GPIO_Mode_Out_PP</code>改为<code>GPIO_InitStructure.GPIO_Mode=GPIO_Mode_AF_PP</code>，设置为复用推挽输出模式。</p>
<p>在PWM模式下电平的高低有PWM模块进行控制，而不是芯片来控制，因此需要复用PA8,9,10三个引脚即可，而while循环中空循环即可。</p>
<p><code>TIM_OCInitTypeDef</code>结构体来储存配置信息。我们设置<code>TIM_OCMode</code>为<code>TIM_OCMode_PWM1</code>，<code>TIM_OCPolarity</code>为<code>TIM_OCPolarity_Low</code>。我们需要设置占空比为<code>50%</code>，根据公式，占空比等于$\frac{（TIM_{Pulse}）}{（TIM_{Period} + 1）}$，上面我们设置了<code>TIM_Period</code>为1000 – 1，这里为了达到占空比为<code>50%</code>，需要设置<code>TIM_Period</code>为500，然后开启输出比较状态。</p>
<p>配置TIM1的CH1,2,3为PWM模式：根据复用关系表我们可以知道，三个端口PA8,9,10分别复用了TIM1的通道1，通道2和通道3，因此我们需要分别初始化三个通道和使能三个通道的CCR预装载器。最后使能ARR的预装载器；最后，我们只需要开启TIM1，使能TIM1的主输出即可。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//set OCL/OCH=1:1 and start state</span></span><br><span class="line">	TIM_OCInitTypeDef TIM_OCInitStructure;</span><br><span class="line">	TIM_OCInitStructure.TIM_OCMode=TIM_OCMode_PWM1;</span><br><span class="line">	TIM_OCInitStructure.TIM_OCPolarity=TIM_OCPolarity_Low;</span><br><span class="line">	TIM_OCInitStructure.TIM_Pulse=<span class="number">500</span>;</span><br><span class="line">	TIM_OCInitStructure.TIM_OutputState=TIM_OutputState_Enable;</span><br><span class="line"><span class="comment">//AF_OC1,2,3</span></span><br><span class="line">	TIM_OC1Init(TIM1, &amp;TIM_OCInitStructure);</span><br><span class="line">	TIM_OC2Init(TIM1, &amp;TIM_OCInitStructure);</span><br><span class="line">	TIM_OC3Init(TIM1, &amp;TIM_OCInitStructure);</span><br><span class="line">	TIM_ARRPreloadConfig(TIM1,ENABLE);</span><br><span class="line"><span class="comment">//start TIM1</span></span><br><span class="line">	TIM_Cmd(TIM1,ENABLE);</span><br><span class="line">	TIM_CtrlPWMOutputs(TIM1,ENABLE);</span><br></pre></td></tr></table></figure>



<h4 id="五、实验结果及其分析"><a href="#五、实验结果及其分析" class="headerlink" title="五、实验结果及其分析"></a>五、实验结果及其分析</h4><p>先不用PWM，常用推挽输出模式，所得的结果为：三个LED灯周期性闪烁，当PA8,9,10为高电平时，LED灯熄灭。反之，则LED灯亮起。其亮起的时间(即示波为低电平的时间)为<code>5*0.2ms=1ms</code>。</p>
<p><img src="https://s1.ax1x.com/2022/10/15/x0lMxU.png"></p>
<p>使用PWM模式下，所得的周期是推挽输出模式的一半。</p>
<p><img src="https://s1.ax1x.com/2022/10/15/x0l1r4.png"></p>
<p>定时器时间没变的情况下，为什么跑出来的周期不一样呢？</p>
<blockquote>
<p>对于普通的推挽模式下选择的是每次经过一次完整计时后设置小灯的状态；但是对于PWM模式下就是将一个周期通过设置占空比将其分为两部分，其中一半的时间小灯熄灭，一半的时间小灯亮起。</p>
</blockquote>
<p><img src="https://s1.ax1x.com/2022/10/15/x01Nwj.png"></p>
<p><img src="https://s1.ax1x.com/2022/10/15/x01tmQ.png"></p>
<p>对于上述的两功能，选择<code>#ifdef</code>：判断某个宏是否被定义，若已定义，执行随后的语句。来选择执行的代码部分。</p>
<p><strong>具体结果见视频。</strong></p>
<h4 id="六、心得体会与建议"><a href="#六、心得体会与建议" class="headerlink" title="六、心得体会与建议"></a>六、心得体会与建议</h4><p>通过本次实验，深入学习掌握了TIM定时器系统和PWM定时输出模式。</p>
</div><div class="post-end"><div class="post-prev"><a href="/2022/10/23/%E5%B5%8C%E5%85%A5%E5%BC%8F%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C3/" title="上一篇文章"><i class="fa-solid fa-chevron-left fa-lg"></i></a></div><div class="post-next"><a href="/2022/10/19/JDBC/" title="下一篇文章"><i class="fa-solid fa-chevron-right fa-lg"></i></a></div></div></article><div class="comment" id="comment"><script src="https://giscus.app/client.js" data-repo="SchwertLin/SwertLin_Blog_Comment" data-repo-id="R_kgDONXjrCQ" data-category="Announcements" data-category-id="DIC_kwDONXjrCc4Cky9X" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="zh-CN" crossorigin="anonymous" async="async"></script></div><div id="post-toc"><aside class="toc-aside"><div class="toc-title"><span><i class="fa-solid fa-paw"></i>目录</span></div><div class="toc-container" id="toc-body"><ol class="toc-content"><li class="toc-content-item toc-content-level-2"><a class="toc-content-link" href="#%E5%AE%9E%E9%AA%8C%E4%BA%8C-%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-content-number">1.</span> <span class="toc-content-text">实验二 定时器</span></a><ol class="toc-content-child"><li class="toc-content-item toc-content-level-4"><a class="toc-content-link" href="#%E4%B8%80%E3%80%81%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84"><span class="toc-content-number">1.0.1.</span> <span class="toc-content-text">一、实验目的</span></a></li><li class="toc-content-item toc-content-level-4"><a class="toc-content-link" href="#%E4%BA%8C%E3%80%81%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83"><span class="toc-content-number">1.0.2.</span> <span class="toc-content-text">二、实验环境</span></a></li><li class="toc-content-item toc-content-level-4"><a class="toc-content-link" href="#%E4%B8%89%E3%80%81%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9"><span class="toc-content-number">1.0.3.</span> <span class="toc-content-text">三、实验内容</span></a></li><li class="toc-content-item toc-content-level-4"><a class="toc-content-link" href="#%E5%9B%9B%E3%80%81%E5%AE%9E%E9%AA%8C%E5%8E%9F%E7%90%86"><span class="toc-content-number">1.0.4.</span> <span class="toc-content-text">四、实验原理</span></a></li><li class="toc-content-item toc-content-level-4"><a class="toc-content-link" href="#%E4%BA%94%E3%80%81%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C%E5%8F%8A%E5%85%B6%E5%88%86%E6%9E%90"><span class="toc-content-number">1.0.5.</span> <span class="toc-content-text">五、实验结果及其分析</span></a></li><li class="toc-content-item toc-content-level-4"><a class="toc-content-link" href="#%E5%85%AD%E3%80%81%E5%BF%83%E5%BE%97%E4%BD%93%E4%BC%9A%E4%B8%8E%E5%BB%BA%E8%AE%AE"><span class="toc-content-number">1.0.6.</span> <span class="toc-content-text">六、心得体会与建议</span></a></li></ol></li></ol></li></ol></div></aside><div class="toc-blank" onclick="tocToggle()"></div></div><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  }
});
MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for(i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.8/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async="async"></script></div></div><div id="tool-bar"><div id="tool-bar-main"><div id="tool-toggle" onclick="toolToggle()" title="设置"><i class="fa-solid fa-gear"></i></div><div id="toc-toggle" onclick="tocToggle()" title="目录"><i class="fa-solid fa-list-ul"></i></div><div id="go-to-comment" onclick="gotoComment()" title="评论"><i class="fa-regular fa-message fa-flip-horizontal"></i></div><div id="back-to-top" onclick="scrollToTop()" title="返回顶部"><i class="fa-solid fa-chevron-up"></i></div></div><div id="tool-bar-more" style="display: none;"><div id="darkmode-switch" onclick="darkmodeSwitch()" title="深色模式"><i class="fa-solid fa-circle-half-stroke"></i></div><div id="font-size-increase" onclick="fontSizeIncrease()" title="放大字体"><i class="fa-solid fa-plus"></i></div><div id="font-size-decrease" onclick="fontSizeDecrease()" title="缩小字体"><i class="fa-solid fa-minus"></i></div></div></div><div id="search-panel"><div class="search-container"><div class="search-head"><div class="search-title"><span><i class="fa-solid fa-paw"></i>搜索</span></div><div class="search-close-btn" onclick="toggleSearchWindow()"><i class="fa-regular fa-circle-xmark"></i></div></div><div class="search-box"><i class="fa-solid fa-magnifying-glass"></i><input id="search-input" type="text" placeholder="请输入需要搜索的内容……" value=""/></div><div class="search-body"><div id="search-count">匹配结果数: </div><div id="search-result"></div><div id="search-result-empty">未搜索到匹配的文章。</div></div></div></div><footer><div class="footer-content"><div class="copyright-info"><i class="fa-regular fa-copyright fa-xs"></i><span>2022 - 2024 </span><a href="/about">Schwertlilien</a><i class="fa-solid fa-cat fa-sm"></i><span>Powered by </span><a href="https://hexo.io/" target="_blank">Hexo</a><span> &amp; </span><a href="https://github.com/chanwj/hexo-theme-meow" target="_blank" title="v2.1.0">Theme Meow</a></div><div class="pageview-site"><span id="busuanzi_container_site_pv">总访问量 : <span id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner"></i></span></span><span id="busuanzi_container_site_uv">总访客数 : <span id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner"></i></span></span></div></div></footer>
<script>const GLOBAL_CONFIG = {
  comment: { theme: 'preferred_color_scheme'}
}
</script>
<script src="/js/third-party/darkmode.js"></script>
<script>var options = {
  dark: '/css/darkmode.css',
  startAt: '24:00',
  endAt: '06:00',
  checkSystemScheme: 'false',
  saveOnToggle: 'true'
};
var darkMode = new DarkMode(options);
// change comment theme synchronously 同步修改评论区主题
if (darkMode.getMode() == "dark" && (true || true)) {
  if (document.getElementById('comment')) {
    document.getElementById('comment').getElementsByTagName('script')[0].setAttribute('data-theme', 'noborder_dark');
  }
}
</script><script>if (localStorage.getItem('font-size')) {
  document.querySelector('.post-content').style.fontSize = localStorage.getItem('font-size') + 'px';
}
</script>
<script src="/js/theme/tool-bar.js"></script>


<script src="/js/theme/menu.js"></script>


<script src="/js/third-party/clipboard.min.js"></script>


<script src="/js/theme/copy.js"></script>
<script>copyCode();
</script>
<script src="/js/jquery-3.7.1.min.js"></script>


<script src="/js/theme/search.js"></script>
<script>searchFunc('/search.xml', 'search-input', 'search-result');
</script></body></html>